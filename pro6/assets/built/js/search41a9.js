function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).GhostContentAPI=t()}(this,function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}function r(e){try{return!!e()}catch(e){return!0}}function o(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function i(e){return l.call(e).slice(8,-1)}function a(e){if(null==e)throw TypeError("Can't call method on "+e);return e}function s(e){return w(a(e))}function n(e,t){return arguments.length<2?"function"==typeof(n=g[e])?n:void 0:g[e]&&g[e][t];var n}var c=function(e){return e&&e.Math==Math&&e},g=c("object"==typeof globalThis&&globalThis)||c("object"==typeof window&&window)||c("object"==typeof self&&self)||c("object"==typeof e&&e)||function(){return this}()||Function("return this")(),p=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),u={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,d={f:f&&!u.call({1:2},1)?function(e){e=f(this,e);return!!e&&e.enumerable}:u},l={}.toString,h="".split,w=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==i(e)?h.call(e,""):Object(e)}:Object,y=function(e){return"object"==typeof e?null!==e:"function"==typeof e},v=n("navigator","userAgent")||"",m=g.process,b=g.Deno,j=m&&m.versions||b&&b.version,S=j&&j.v8;S?Se=(je=S.split("."))[0]<4?1:je[0]+je[1]:v&&(!(je=v.match(/Edge\/(\d+)/))||74<=je[1])&&(je=v.match(/Chrome\/(\d+)/))&&(Se=je[1]);function E(t,n){try{Object.defineProperty(g,t,{value:n,configurable:!0,writable:!0})}catch(e){g[t]=n}return n}function T(e){return Object(a(e))}function x(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++q+B).toString(36)}function O(e){return e=function(e,t){if(!y(e)||L(e))return e;var n=e[z];if(void 0===n)return function(e,t){var n,r;if("string"===t&&"function"==typeof(n=e.toString)&&!y(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!y(r=n.call(e)))return r;if("string"!==t&&"function"==typeof(n=e.toString)&&!y(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}(e,t=void 0===t?"number":t);if(t=n.call(e,t=void 0===t?"default":t),!y(t)||L(t))return t;throw TypeError("Can't convert object to primitive value")}(e,"string"),L(e)?e:String(e)}function A(e){return H?V.createElement(e):{}}var C=Se&&+Se,k=!!Object.getOwnPropertySymbols&&!r(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&C&&C<41}),P=k&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,L=P?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return"function"==typeof t&&Object(e)instanceof t},_="__core-js_shared__",R=g[_]||E(_,{}),N=t(function(e){(e.exports=function(e,t){return R[e]||(R[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.16.0",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})}),I={}.hasOwnProperty,M=Object.hasOwn||function(e,t){return I.call(T(e),t)},q=0,B=Math.random(),D=N("wks"),U=g.Symbol,F=P?U:U&&U.withoutSetter||x,c=function(e){return M(D,e)&&(k||"string"==typeof D[e])||(k&&M(U,e)?D[e]=U[e]:D[e]=F("Symbol."+e)),D[e]},z=c("toPrimitive"),V=g.document,H=y(V)&&y(V.createElement),W=!p&&!r(function(){return 7!=Object.defineProperty(A("div"),"a",{get:function(){return 7}}).a}),G=Object.getOwnPropertyDescriptor,X={f:p?G:function(e,t){if(e=s(e),t=O(t),W)try{return G(e,t)}catch(e){}if(M(e,t))return o(!d.f.call(e,t),e[t])}},J=function(e){if(!y(e))throw TypeError(String(e)+" is not an object");return e},K=Object.defineProperty,$={f:p?K:function(e,t,n){if(J(e),t=O(t),J(n),W)try{return K(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Y=p?function(e,t,n){return $.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e},Q=Function.toString;"function"!=typeof R.inspectSource&&(R.inspectSource=function(e){return Q.call(e)});var Z,ee,te,ne,re,oe,ie,ae,ce=R.inspectSource,u=g.WeakMap,m="function"==typeof u&&/native code/.test(ce(u)),se=N("keys"),b=function(e){return se[e]||(se[e]=x(e))},ue={},fe="Object already initialized",j=g.WeakMap;ie=m||R.state?(Z=R.state||(R.state=new j),ee=Z.get,te=Z.has,ne=Z.set,re=function(e,t){if(te.call(Z,e))throw new TypeError(fe);return t.facade=e,ne.call(Z,e,t),t},oe=function(e){return ee.call(Z,e)||{}},function(e){return te.call(Z,e)}):(ae=b("state"),ue[ae]=!0,re=function(e,t){if(M(e,ae))throw new TypeError(fe);return t.facade=e,Y(e,ae,t),t},oe=function(e){return M(e,ae)?e[ae]:{}},function(e){return M(e,ae)});function le(e){return 0<e?me(ve(e),9007199254740991):0}function pe(e,t){var n,r=s(e),o=0,i=[];for(n in r)!M(ue,n)&&M(r,n)&&i.push(n);for(;t.length>o;)M(r,n=t[o++])&&(~Ee(i,n)||i.push(n));return i}var de={set:re,get:oe,has:ie,enforce:function(e){return ie(e)?oe(e):re(e,{})},getterFor:function(n){return function(e){var t;if(!y(e)||(t=oe(e)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return t}}},he=t(function(e){var t=de.get,c=de.enforce,s=String(String).split("String");(e.exports=function(e,t,n,r){var o=!!r&&!!r.unsafe,i=!!r&&!!r.enumerable,a=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof t||M(n,"name")||Y(n,"name",t),(r=c(n)).source||(r.source=s.join("string"==typeof t?t:""))),e!==g?(o?!a&&e[t]&&(i=!0):delete e[t],i?e[t]=n:Y(e,t,n)):i?e[t]=n:E(t,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&t(this).source||ce(this)})}),ge=Math.ceil,ye=Math.floor,ve=function(e){return isNaN(e=+e)?0:(0<e?ye:ge)(e)},me=Math.min,be=Math.max,we=Math.min,je=function(c){return function(e,t,n){var r,o=s(e),i=le(o.length),a=(e=i,(n=ve(n))<0?be(n+e,0):we(n,e));if(c&&t!=t){for(;a<i;)if((r=o[a++])!=r)return!0}else for(;a<i;a++)if((c||a in o)&&o[a]===t)return c||a||0;return!c&&-1}},Se={includes:je(!0),indexOf:je(!1)},Ee=Se.indexOf,Te=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],xe=Te.concat("length","prototype"),Oe={f:Object.getOwnPropertyNames||function(e){return pe(e,xe)}},Ae={f:Object.getOwnPropertySymbols},Ce=n("Reflect","ownKeys")||function(e){var t=Oe.f(J(e)),n=Ae.f;return n?t.concat(n(e)):t},ke=/#|\.prototype\./,S=function(e,t){e=Le[Pe(e)];return e==Re||e!=_e&&("function"==typeof t?r(t):!!t)},Pe=S.normalize=function(e){return String(e).replace(ke,".").toLowerCase()},Le=S.data={},_e=S.NATIVE="N",Re=S.POLYFILL="P",Ne=S,Ie=X.f,_=function(e,t){var n,r,o,i,a=e.target,c=e.global,s=e.stat;if(n=c?g:s?g[a]||E(a,{}):(g[a]||{}).prototype)for(r in t){if(o=t[r],i=e.noTargetGet?(i=Ie(n,r))&&i.value:n[r],!Ne(c?r:a+(s?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;!function(e,t){for(var n=Ce(t),r=$.f,o=X.f,i=0;i<n.length;i++){var a=n[i];M(e,a)||r(e,a,o(t,a))}}(o,i)}(e.sham||i&&i.sham)&&Y(o,"sham",!0),he(n,r,o,e)}},P=function(e,t){var n=[][e];return!!n&&r(function(){n.call(null,t||function(){throw 1},1)})},Me=[].join,u=w!=Object,N=P("join",",");_({target:"Array",proto:!0,forced:u||!N},{join:function(e){return Me.call(s(this),void 0===e?",":e)}});function qe(){}function Be(e){e.write(He("")),e.close();var t=e.parentWindow.Object;return e=null,t}var De,Ue=Object.keys||function(e){return pe(e,Te)},Fe=p?Object.defineProperties:function(e,t){J(e);for(var n,r=Ue(t),o=r.length,i=0;i<o;)$.f(e,n=r[i++],t[n]);return e},ze=n("document","documentElement"),Ve=b("IE_PROTO"),He=function(e){return"<script>"+e+"<\/script>"},We=function(){try{De=new ActiveXObject("htmlfile")}catch(e){}We=(!document.domain||!De)&&function(){var e=A("iframe");if(e.style)return e.style.display="none",ze.appendChild(e),e.src=String("javascript:"),(e=e.contentWindow.document).open(),e.write(He("document.F=Object")),e.close(),e.F}()||Be(De);for(var e=Te.length;e--;)delete We.prototype[Te[e]];return We()};ue[Ve]=!0;m=Object.create||function(e,t){var n;return null!==e?(qe.prototype=J(e),n=new qe,qe.prototype=null,n[Ve]=e):n=We(),void 0===t?n:Fe(n,t)},j=c("unscopables"),je=Array.prototype;null==je[j]&&$.f(je,j,{configurable:!0,value:m(null)});var Ge=Se.includes;_({target:"Array",proto:!0},{includes:function(e){return Ge(this,e,1<arguments.length?arguments[1]:void 0)}}),je[j].includes=!0;function Xe(e){if(L(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)}function Je(e){if(y(t=e)&&(void 0!==(n=t[Ke])?n:"RegExp"==i(t)))throw TypeError("The method doesn't accept regular expressions");var t,n;return e}var Ke=c("match"),$e=c("match"),S=function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[$e]=!1,"/./"[t](n)}catch(t){}}return!1},u=X.f,Ye="".endsWith,Qe=Math.min,N=S("endsWith");_({target:"String",proto:!0,forced:!(!N&&((ut=u(String.prototype,"endsWith"))&&!ut.writable)||N)},{endsWith:function(e){var t=Xe(a(this));Je(e);var n=1<arguments.length?arguments[1]:void 0,r=le(t.length),r=void 0===n?r:Qe(le(n),r),e=Xe(e);return Ye?Ye.call(t,e,r):t.slice(r-e.length,r)===e}});var b=X.f,Ze="".startsWith,et=Math.min,m=S("startsWith");_({target:"String",proto:!0,forced:!(!m&&((St=b(String.prototype,"startsWith"))&&!St.writable)||m)},{startsWith:function(e){var t=Xe(a(this));Je(e);var n=le(et(1<arguments.length?arguments[1]:void 0,t.length)),e=Xe(e);return Ze?Ze.call(t,e,n):t.slice(n,n+e.length)===e}});Se={};Se[c("toStringTag")]="z";var je="[object z]"===String(Se),tt=c("toStringTag"),nt="Arguments"==i(function(){return arguments}()),rt=je?i:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(e=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),tt))?e:nt?i(t):"Object"==(e=i(t))&&"function"==typeof t.callee?"Arguments":e};je||he(Object.prototype,"toString",je?{}.toString:function(){return"[object "+rt(this)+"]"},{unsafe:!0});function ot(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}function it(r,o,e){if(ot(r),void 0===o)return r;switch(e){case 0:return function(){return r.call(o)};case 1:return function(e){return r.call(o,e)};case 2:return function(e,t){return r.call(o,e,t)};case 3:return function(e,t,n){return r.call(o,e,t,n)}}return function(){return r.apply(o,arguments)}}function at(e){var t=e.return;return void 0!==t&&J(t.call(e)).value}function ct(e,t){this.stopped=e,this.result=t}function st(e,t,n){function r(e){return i&&at(i),new ct(!0,e)}function o(e){return p?(J(e),h?g(e[0],e[1],r):g(e[0],e[1])):h?g(e,r):g(e)}var i,a,c,s,u,f,l=n&&n.that,p=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),g=it(t,l,1+p+h);if(d)i=e;else{if("function"!=typeof(l=function(){if(null!=e)return e[dt]||e["@@iterator"]||ft[rt(e)]}()))throw TypeError("Target is not iterable");if(void 0!==(d=l)&&(ft.Array===d||pt[lt]===d)){for(a=0,c=le(e.length);a<c;a++)if((s=o(e[a]))&&s instanceof ct)return s;return new ct(!1)}i=l.call(e)}for(u=i.next;!(f=u.call(i)).done;){try{s=o(f.value)}catch(e){throw at(i),e}if("object"==typeof s&&s&&s instanceof ct)return s}return new ct(!1)}var j=g.Promise,u=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,e={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),r=e instanceof Array}catch(n){}return function(e,t){return J(e),function(e){if(!y(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(t),r?n.call(e,t):e.__proto__=t,e}}():void 0),ut=$.f,N=c("toStringTag"),S=c("species"),ft={},lt=c("iterator"),pt=Array.prototype,dt=c("iterator"),ht=c("iterator"),gt=!1;try{var yt=0,vt={next:function(){return{done:!!yt++}},return:function(){gt=!0}};vt[ht]=function(){return this},Array.from(vt,function(){throw 2})}catch(e){}var mt,bt,wt=c("species"),b=/(?:iphone|ipod|ipad).*applewebkit/i.test(v),jt="process"==i(g.process),St=g.setImmediate,m=g.clearImmediate,Et=g.process,Se=g.MessageChannel,Tt=g.Dispatch,xt=0,Ot={};try{mt=g.location}catch(e){}function At(e){return function(){Ct(e)}}var Ct=function(e){var t;Ot.hasOwnProperty(e)&&(t=Ot[e],delete Ot[e],t())},je=function(e){Ct(e.data)},vt=function(e){g.postMessage(String(e),mt.protocol+"//"+mt.host)};St&&m||(St=function(e){for(var t=[],n=arguments.length,r=1;r<n;)t.push(arguments[r++]);return Ot[++xt]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},bt(xt),xt},m=function(e){delete Ot[e]},jt?bt=function(e){Et.nextTick(At(e))}:Tt&&Tt.now?bt=function(e){Tt.now(At(e))}:Se&&!b?(qt=(Se=new Se).port2,Se.port1.onmessage=je,bt=it(qt.postMessage,qt,1)):g.addEventListener&&"function"==typeof postMessage&&!g.importScripts&&mt&&"file:"!==mt.protocol&&!r(vt)?(bt=vt,g.addEventListener("message",je,!1)):bt="onreadystatechange"in A("script")?function(e){ze.appendChild(A("script")).onreadystatechange=function(){ze.removeChild(this),Ct(e)}}:function(e){setTimeout(At(e),0)});var kt,Pt,Lt,_t,Rt,Nt,It,Mt,qt={set:St,clear:m},vt=/web0s(?!.*chrome)/i.test(v),je=X.f,Bt=qt.set,St=g.MutationObserver||g.WebKitMutationObserver,m=g.document,Dt=g.process,v=g.Promise,je=je(g,"queueMicrotask"),je=je&&je.value;je||(kt=function(){var e,t;for(jt&&(e=Dt.domain)&&e.exit();Pt;){t=Pt.fn,Pt=Pt.next;try{t()}catch(e){throw Pt?_t():Lt=void 0,e}}Lt=void 0,e&&e.enter()},_t=b||jt||vt||!St||!m?v&&v.resolve?((It=v.resolve(void 0)).constructor=v,Mt=It.then,function(){Mt.call(It,kt)}):jt?function(){Dt.nextTick(kt)}:function(){Bt.call(g,kt)}:(Rt=!0,Nt=m.createTextNode(""),new St(kt).observe(Nt,{characterData:!0}),function(){Nt.data=Rt=!Rt}));function Ut(e){var n,r;this.promise=new e(function(e,t){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=e,r=t}),this.resolve=ot(n),this.reject=ot(r)}var Ft,zt,Vt,Ht,Wt=je||function(e){e={fn:e,next:void 0};Lt&&(Lt.next=e),Pt||(Pt=e,_t()),Lt=e},Gt={f:function(e){return new Ut(e)}},Xt=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Jt="object"==typeof window,Kt=qt.set,$t=c("species"),Yt="Promise",Qt=de.get,Zt=de.set,en=de.getterFor(Yt),m=j&&j.prototype,tn=j,St=m,nn=g.TypeError,rn=g.document,on=g.process,an=Gt.f,cn=an,sn=!!(rn&&rn.createEvent&&g.dispatchEvent),un="function"==typeof PromiseRejectionEvent,fn="unhandledrejection",ln=!1,je=Ne(Yt,function(){var e=ce(tn),t=e!==String(tn);if(!t&&66===C)return!0;if(51<=C&&/native code/.test(e))return!1;var n=new tn(function(e){e(1)}),e=function(e){e(function(){},function(){})};return(n.constructor={})[$t]=e,!(ln=n.then(function(){})instanceof e)||!t&&Jt&&!un}),qt=je||!function(){if(gt){var e=!1;try{var t={};t[ht]=function(){return{next:function(){return{done:e=!0}}}},tn.all(t).catch(function(){})}catch(e){}return e}}(),pn=function(e){var t;return!(!y(e)||"function"!=typeof(t=e.then))&&t},dn=function(p,d){var h;p.notified||(p.notified=!0,h=p.reactions,Wt(function(){for(var r,e=p.value,t=1==p.state,n=0;h.length>n;){var o,i,a,c=h[n++],s=t?c.ok:c.fail,u=c.resolve,f=c.reject,l=c.domain;try{s?(t||(2===p.rejection&&function(t){Kt.call(g,function(){var e=t.facade;jt?on.emit("rejectionHandled",e):hn("rejectionhandled",e,t.value)})}(p),p.rejection=1),!0===s?o=e:(l&&l.enter(),o=s(e),l&&(l.exit(),a=!0)),o===c.promise?f(nn("Promise-chain cycle")):(i=pn(o))?i.call(o,u,f):u(o)):f(e)}catch(e){l&&!a&&l.exit(),f(e)}}p.reactions=[],p.notified=!1,d&&!p.rejection&&(r=p,Kt.call(g,function(){var e,t=r.facade,n=r.value;if(gn(r)&&(e=Xt(function(){jt?on.emit("unhandledRejection",n,t):hn(fn,t,n)}),r.rejection=jt||gn(r)?2:1,e.error))throw e.value}))}))},hn=function(e,t,n){var r,o;sn?((r=rn.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),g.dispatchEvent(r)):r={promise:t,reason:n},!un&&(o=g["on"+e])?o(r):e===fn&&function(e,t){var n=g.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},gn=function(e){return 1!==e.rejection&&!e.parent},yn=function(t,n,r){return function(e){t(n,e,r)}},vn=function(e,t,n){e.done||(e.done=!0,(e=n?n:e).value=t,e.state=2,dn(e,!0))},mn=function(n,e,t){if(!n.done){n.done=!0,t&&(n=t);try{if(n.facade===e)throw nn("Promise can't be resolved itself");var r=pn(e);r?Wt(function(){var t={done:!1};try{r.call(e,yn(mn,t,n),yn(vn,t,n))}catch(e){vn(t,e,n)}}):(n.value=e,n.state=1,dn(n,!1))}catch(e){vn({done:!1},e,n)}}};if(je&&(St=(tn=function(e){!function(e,t){if(!(e instanceof tn))throw TypeError("Incorrect "+t+" invocation")}(this,Yt),ot(e),Ft.call(this);var t=Qt(this);try{e(yn(mn,t),yn(vn,t))}catch(e){vn(t,e)}}).prototype,(Ft=function(e){Zt(this,{type:Yt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(e,t){for(var n in t)he(e,n,t[n],void 0);return e}(St,{then:function(e,t){var n,r,o=en(this),i=an((n=tn,void 0===(r=J(this).constructor)||null==(i=J(r)[wt])?n:ot(i)));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=jt?on.domain:void 0,o.parent=!0,o.reactions.push(i),0!=o.state&&dn(o,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),zt=function(){var e=new Ft,t=Qt(e);this.promise=e,this.resolve=yn(mn,t),this.reject=yn(vn,t)},Gt.f=an=function(e){return e===tn||e===Vt?new zt:cn(e)},"function"==typeof j&&m!==Object.prototype)){Ht=m.then,ln||(he(m,"then",function(e,t){var n=this;return new tn(function(e,t){Ht.call(n,e,t)}).then(e,t)},{unsafe:!0}),he(m,"catch",St.catch,{unsafe:!0}));try{delete m.constructor}catch(e){}u&&u(m,St)}_({global:!0,wrap:!0,forced:je},{Promise:tn}),(St=tn)&&!M(St=St.prototype,N)&&ut(St,N,{configurable:!0,value:"Promise"}),St=n("Promise"),N=$.f,p&&St&&!St[S]&&N(St,S,{configurable:!0,get:function(){return this}}),Vt=n(Yt),_({target:Yt,stat:!0,forced:je},{reject:function(e){var t=an(this);return t.reject.call(void 0,e),t.promise}}),_({target:Yt,stat:!0,forced:je},{resolve:function(e){return function(e,t){if(J(e),y(t)&&t.constructor===e)return t;e=Gt.f(e);return(0,e.resolve)(t),e.promise}(this,e)}}),_({target:Yt,stat:!0,forced:qt},{all:function(e){var c=this,t=an(c),s=t.resolve,u=t.reject,n=Xt(function(){var r=ot(c.resolve),o=[],i=0,a=1;st(e,function(e){var t=i++,n=!1;o.push(void 0),a++,r.call(c,e).then(function(e){n||(n=!0,o[t]=e,--a||s(o))},u)}),--a||s(o)});return n.error&&u(n.value),t.promise},race:function(e){var n=this,r=an(n),o=r.reject,t=Xt(function(){var t=ot(n.resolve);st(e,function(e){t.call(n,e).then(r.resolve,o)})});return t.error&&o(t.value),r.promise}});var bn=Object.assign,wn=Object.defineProperty,qt=!bn||r(function(){if(p&&1!==bn({b:1},bn(wn({},"a",{enumerable:!0,get:function(){wn(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=bn({},e)[n]||Ue(bn({},t)).join("")!=r})?function(e,t){for(var n=T(e),r=arguments.length,o=1,i=Ae.f,a=d.f;o<r;)for(var c,s=w(arguments[o++]),u=i?Ue(s).concat(i(s)):Ue(s),f=u.length,l=0;l<f;)c=u[l++],p&&!a.call(s,c)||(n[c]=s[c]);return n}:bn;_({target:"Object",stat:!0,forced:Object.assign!==qt},{assign:qt});function jn(e,t,n){(t=O(t))in e?$.f(e,t,o(0,n)):e[t]=n}function Sn(e,t){return new(void 0===(n=En(e=e)&&("function"==typeof(n=e.constructor)&&(n===Array||En(n.prototype))||y(n)&&null===(n=n[Tn]))?void 0:n)?Array:n)(0===t?0:t);var n}var En=Array.isArray||function(e){return"Array"==i(e)},Tn=c("species"),xn=c("species"),On=c("isConcatSpreadable"),An=9007199254740991,Cn="Maximum allowed index exceeded",qt=51<=C||!r(function(){var e=[];return e[On]=!1,e.concat()[0]!==e}),c=51<=C||!r(function(){var e=[];return(e.constructor={})[xn]=function(){return{foo:1}},1!==e.concat(Boolean).foo});_({target:"Array",proto:!0,forced:!qt||!c},{concat:function(e){for(var t,n,r,o=T(this),i=Sn(o,0),a=0,c=-1,s=arguments.length;c<s;c++)if(function(e){if(!y(e))return!1;var t=e[On];return void 0!==t?!!t:En(e)}(r=-1===c?o:arguments[c])){if(a+(n=le(r.length))>An)throw TypeError(Cn);for(t=0;t<n;t++,a++)t in r&&jn(i,a,r[t])}else{if(An<=a)throw TypeError(Cn);jn(i,a++,r)}return i.length=a,i}}),_({target:"Object",stat:!0,forced:r(function(){Ue(1)})},{keys:function(e){return Ue(T(e))}});var c=$.f,_=Function.prototype,kn=_.toString,Pn=/^\s*function ([^ (]*)/;!p||"name"in _||c(_,"name",{configurable:!0,get:function(){try{return kn.call(this).match(Pn)[1]}catch(e){return""}}});var Ln,_n=[].push,_=function(p){var d=1==p,h=2==p,g=3==p,y=4==p,v=6==p,m=7==p,b=5==p||v;return function(e,t,n,r){for(var o,i,a=T(e),c=w(a),s=it(t,n,3),u=le(c.length),f=0,r=r||Sn,l=d?r(e,u):h||m?r(e,0):void 0;f<u;f++)if((b||f in c)&&(i=s(o=c[f],f,a),p))if(d)l[f]=i;else if(i)switch(p){case 3:return!0;case 5:return o;case 6:return f;case 2:_n.call(l,o)}else switch(p){case 4:return!1;case 7:_n.call(l,o)}return v?-1:g||y?y:l}},Rn=[_(0),_(1),_(2),_(3),_(4),_(5),_(6),_(7)][0],Nn=P("forEach")?[].forEach:function(e){return Rn(this,e,1<arguments.length?arguments[1]:void 0)};for(Ln in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var In=g[Ln],In=In&&In.prototype;if(In&&In.forEach!==Nn)try{Y(In,"forEach",Nn)}catch(e){In.forEach=Nn}}function Mn(n,r){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return n.apply(r,e)}}var qn=Object.prototype.toString;function Bn(e){return"[object Array]"===qn.call(e)}function Dn(e){return void 0===e}function Un(e){return null!==e&&"object"==typeof e}function Fn(e){if("[object Object]"!==qn.call(e))return!1;e=Object.getPrototypeOf(e);return null===e||e===Object.prototype}function zn(e){return"[object Function]"===qn.call(e)}function Vn(e,t){if(null!=e)if(Bn(e="object"!=typeof e?[e]:e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var Hn={isArray:Bn,isArrayBuffer:function(e){return"[object ArrayBuffer]"===qn.call(e)},isBuffer:function(e){return null!==e&&!Dn(e)&&null!==e.constructor&&!Dn(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Un,isPlainObject:Fn,isUndefined:Dn,isDate:function(e){return"[object Date]"===qn.call(e)},isFile:function(e){return"[object File]"===qn.call(e)},isBlob:function(e){return"[object Blob]"===qn.call(e)},isFunction:zn,isStream:function(e){return Un(e)&&zn(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:Vn,merge:function n(){var r={};function e(e,t){Fn(r[t])&&Fn(e)?r[t]=n(r[t],e):Fn(e)?r[t]=n({},e):Bn(e)?r[t]=e.slice():r[t]=e}for(var t=0,o=arguments.length;t<o;t++)Vn(arguments[t],e);return r},extend:function(n,e,r){return Vn(e,function(e,t){n[t]=r&&"function"==typeof e?Mn(e,r):e}),n},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return e=65279===e.charCodeAt(0)?e.slice(1):e}};function Wn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Gn(e,t,n){return t&&(n=n?n(t):Hn.isURLSearchParams(t)?t.toString():(r=[],Hn.forEach(t,function(e,t){null!=e&&(Hn.isArray(e)?t+="[]":e=[e],Hn.forEach(e,function(e){Hn.isDate(e)?e=e.toISOString():Hn.isObject(e)&&(e=JSON.stringify(e)),r.push(Wn(t)+"="+Wn(e))}))}),r.join("&")))&&(-1!==(t=e.indexOf("#"))&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n),e;var r}function Xn(){this.handlers=[]}Xn.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},Xn.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Xn.prototype.forEach=function(t){Hn.forEach(this.handlers,function(e){null!==e&&t(e)})};function Jn(t,n,e){return Hn.forEach(e,function(e){t=e(t,n)}),t}function Kn(e){return!(!e||!e.__CANCEL__)}function $n(n,r){Hn.forEach(n,function(e,t){t!==r&&t.toUpperCase()===r.toUpperCase()&&(n[r]=e,delete n[t])})}function Yn(e,t,n,r,o){return e=new Error(e),n=n,r=r,o=o,e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}var Qn,Zn,er,tr=Xn,nr=Hn.isStandardBrowserEnv()?{write:function(e,t,n,r,o,i){var a=[];a.push(e+"="+encodeURIComponent(t)),Hn.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Hn.isString(r)&&a.push("path="+r),Hn.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){e=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},rr=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],or=Hn.isStandardBrowserEnv()?(Zn=/(msie|trident)/i.test(navigator.userAgent),er=document.createElement("a"),Qn=ar(window.location.href),function(e){e=Hn.isString(e)?ar(e):e;return e.protocol===Qn.protocol&&e.host===Qn.host}):function(){return!0},ir={"Content-Type":"application/x-www-form-urlencoded"};function ar(e){return Zn&&(er.setAttribute("href",e),e=er.href),er.setAttribute("href",e),{href:er.href,protocol:er.protocol?er.protocol.replace(/:$/,""):"",host:er.host,search:er.search?er.search.replace(/^\?/,""):"",hash:er.hash?er.hash.replace(/^#/,""):"",hostname:er.hostname,port:er.port,pathname:"/"===er.pathname.charAt(0)?er.pathname:"/"+er.pathname}}function cr(e,t){!Hn.isUndefined(e)&&Hn.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var sr={adapter:mr="undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?function(f){return new Promise(function(c,s){var n=f.data,r=f.headers;Hn.isFormData(n)&&delete r["Content-Type"];var u=new XMLHttpRequest;f.auth&&(i=f.auth.username||"",e=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"",r.Authorization="Basic "+btoa(i+":"+e));var e,t,o,i=(t=f.baseURL,i=f.url,t&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(i)?(e=t,(t=i)?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e):i);if(u.open(f.method.toUpperCase(),Gn(i,f.params,f.paramsSerializer),!0),u.timeout=f.timeout,u.onreadystatechange=function(){var e,t,n,r,o,i,a;u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&(t="getAllResponseHeaders"in u?(r=u.getAllResponseHeaders(),a={},r&&Hn.forEach(r.split("\n"),function(e){i=e.indexOf(":"),o=Hn.trim(e.substr(0,i)).toLowerCase(),i=Hn.trim(e.substr(i+1)),o&&(a[o]&&0<=rr.indexOf(o)||(a[o]="set-cookie"===o?(a[o]||[]).concat([i]):a[o]?a[o]+", "+i:i))}),a):null,n={data:f.responseType&&"text"!==f.responseType?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:t,config:f,request:u},e=c,r=s,n=(t=n).config.validateStatus,t.status&&n&&!n(t.status)?r(Yn("Request failed with status code "+t.status,t.config,null,t.request,t)):e(t),u=null)},u.onabort=function(){u&&(s(Yn("Request aborted",f,"ECONNABORTED",u)),u=null)},u.onerror=function(){s(Yn("Network Error",f,null,u)),u=null},u.ontimeout=function(){var e="timeout of "+f.timeout+"ms exceeded";f.timeoutErrorMessage&&(e=f.timeoutErrorMessage),s(Yn(e,f,"ECONNABORTED",u)),u=null},Hn.isStandardBrowserEnv()&&(o=(f.withCredentials||or(i))&&f.xsrfCookieName?nr.read(f.xsrfCookieName):void 0)&&(r[f.xsrfHeaderName]=o),"setRequestHeader"in u&&Hn.forEach(r,function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete r[t]:u.setRequestHeader(t,e)}),Hn.isUndefined(f.withCredentials)||(u.withCredentials=!!f.withCredentials),f.responseType)try{u.responseType=f.responseType}catch(c){if("json"!==f.responseType)throw c}"function"==typeof f.onDownloadProgress&&u.addEventListener("progress",f.onDownloadProgress),"function"==typeof f.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",f.onUploadProgress),f.cancelToken&&f.cancelToken.promise.then(function(e){u&&(u.abort(),s(e),u=null)}),n=n||null,u.send(n)})}:mr,transformRequest:[function(e,t){return $n(t,"Accept"),$n(t,"Content-Type"),Hn.isFormData(e)||Hn.isArrayBuffer(e)||Hn.isBuffer(e)||Hn.isStream(e)||Hn.isFile(e)||Hn.isBlob(e)?e:Hn.isArrayBufferView(e)?e.buffer:Hn.isURLSearchParams(e)?(cr(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Hn.isObject(e)?(cr(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Hn.forEach(["delete","get","head"],function(e){sr.headers[e]={}}),Hn.forEach(["post","put","patch"],function(e){sr.headers[e]=Hn.merge(ir)});var ur=sr;function fr(e){e.cancelToken&&e.cancelToken.throwIfRequested()}function lr(t){return fr(t),t.headers=t.headers||{},t.data=Jn(t.data,t.headers,t.transformRequest),t.headers=Hn.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Hn.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||ur.adapter)(t).then(function(e){return fr(t),e.data=Jn(e.data,e.headers,t.transformResponse),e},function(e){return Kn(e)||(fr(t),e&&e.response&&(e.response.data=Jn(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}function pr(t,n){n=n||{};var r={},e=["url","method","data"],o=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(e,t){return Hn.isPlainObject(e)&&Hn.isPlainObject(t)?Hn.merge(e,t):Hn.isPlainObject(t)?Hn.merge({},t):Hn.isArray(t)?t.slice():t}function s(e){Hn.isUndefined(n[e])?Hn.isUndefined(t[e])||(r[e]=c(void 0,t[e])):r[e]=c(t[e],n[e])}Hn.forEach(e,function(e){Hn.isUndefined(n[e])||(r[e]=c(void 0,n[e]))}),Hn.forEach(o,s),Hn.forEach(i,function(e){Hn.isUndefined(n[e])?Hn.isUndefined(t[e])||(r[e]=c(void 0,t[e])):r[e]=c(void 0,n[e])}),Hn.forEach(a,function(e){e in n?r[e]=c(t[e],n[e]):e in t&&(r[e]=c(void 0,t[e]))});var u=e.concat(o).concat(i).concat(a),a=Object.keys(t).concat(Object.keys(n)).filter(function(e){return-1===u.indexOf(e)});return Hn.forEach(a,s),r}function dr(e){this.defaults=e,this.interceptors={request:new tr,response:new tr}}dr.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=pr(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[lr,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},dr.prototype.getUri=function(e){return e=pr(this.defaults,e),Gn(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},Hn.forEach(["delete","get","head","options"],function(n){dr.prototype[n]=function(e,t){return this.request(pr(t||{},{method:n,url:e,data:(t||{}).data}))}}),Hn.forEach(["post","put","patch"],function(r){dr.prototype[r]=function(e,t,n){return this.request(pr(n||{},{method:r,url:e,data:t}))}});var hr=dr;function gr(e){this.message=e}gr.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},gr.prototype.__CANCEL__=!0;var yr=gr;function vr(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new yr(e),t(n.reason))})}vr.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},vr.source=function(){var t;return{token:new vr(function(e){t=e}),cancel:t}};var mr=vr;function br(e){var t=new hr(e),e=Mn(hr.prototype.request,t);return Hn.extend(e,hr.prototype,t),Hn.extend(e,t),e}var wr=br(ur);wr.Axios=hr,wr.create=function(e){return br(pr(wr.defaults,e))},wr.Cancel=yr,wr.CancelToken=mr,wr.isCancel=Kn,wr.all=function(e){return Promise.all(e)},wr.spread=function(t){return function(e){return t.apply(null,e)}},wr.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError};mr=wr;mr.default=wr;var jr=mr,Sr=["v2","v3","v4","canary"],Er="@tryghost/content-api";return function e(t){var o=t.url,n=t.host,r=t.ghostPath,i=void 0===r?"ghost":r,a=t.version,c=t.key;if(n&&(console.warn("".concat(Er,": The 'host' parameter is deprecated, please use 'url' instead")),o=o||n),this instanceof e)return e({url:o,version:a,key:c});if(!a)throw new Error("".concat(Er," Config Missing: 'version' is required. E.g. ").concat(Sr.join(",")));if(!Sr.includes(a))throw new Error("".concat(Er," Config Invalid: 'version' ").concat(a," is not supported"));if(!o)throw new Error("".concat(Er," Config Missing: 'url' is required. E.g. 'https://site.com'"));if(!/https?:\/\//.test(o))throw new Error("".concat(Er," Config Invalid: 'url' ").concat(o," requires a protocol. E.g. 'https://site.com'"));if(o.endsWith("/"))throw new Error("".concat(Er," Config Invalid: 'url' ").concat(o," must not have a trailing slash. E.g. 'https://site.com'"));if(i.endsWith("/")||i.startsWith("/"))throw new Error("".concat(Er," Config Invalid: 'ghostPath' ").concat(i," must not have a leading or trailing slash. E.g. 'ghost'"));if(c&&!/[0-9a-f]{26}/.test(c))throw new Error("".concat(Er," Config Invalid: 'key' ").concat(c," must have 26 hex characters"));n=["posts","authors","tags","pages","settings"].reduce(function(e,r){return Object.assign(e,(n={read:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0;if(!e||!e.id&&!e.slug)return Promise.reject(new Error("".concat(Er," read requires an id or slug.")));t=Object.assign({},e,t);return s(r,t,e.id||"slug/".concat(e.slug),n)},browse:function(){return s(r,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},null,1<arguments.length?arguments[1]:void 0)}},(t=r)in(e={})?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e));var t,n},{});return delete n.settings.read,n;function s(t,e,n,r){r=3<arguments.length&&void 0!==r?r:null;if(!r&&!c)return Promise.reject(new Error("".concat(Er," Config Missing: 'key' is required.")));delete e.id;r=r?{Authorization:"GhostMembers ".concat(r)}:void 0;return jr.get("".concat(o,"/").concat(i,"/api/").concat(a,"/content/").concat(t,"/").concat(n?n+"/":""),{params:Object.assign({key:c},e),paramsSerializer:function(r){return Object.keys(r).reduce(function(e,t){var n=encodeURIComponent([].concat(r[t]).join(","));return e.concat("".concat(t,"=").concat(n))},[]).join("&")},headers:r}).then(function(e){return Array.isArray(e.data[t])?1!==e.data[t].length||e.data.meta?Object.assign(e.data[t],{meta:e.data.meta}):e.data[t][0]:e.data[t]}).catch(function(e){if(e.response&&e.response.data&&e.response.data.errors){var t=e.response.data.errors[0],n=new Error(t.message),r=Object.keys(t);throw n.name=t.type,r.forEach(function(e){n[e]=t[e]}),n.response=e.response,n.request=e.request,n.config=e.config,n}throw e})}}}),function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.fuzzysort=t()}(this,function(){var P="undefined"!=typeof require&&"undefined"==typeof window,n=new Map,r=new Map,L=[];L.total=0;var w=[],j=[];function t(){n.clear(),r.clear(),w=[],j=[]}function _(e){for(var t=-9007199254740991,n=e.length-1;0<=n;--n){var r=e[n];null===r||t<(r=r.score)&&(t=r)}return-9007199254740991===t?null:t}function R(e,t){var n=e[t];if(void 0!==n)return n;for(var r=t,o=(r=!Array.isArray(t)?t.split("."):r).length,i=-1;e&&++i<o;)e=e[r[i]];return e}function N(e){return"object"==typeof e}function o(){var i=[],a=0,e={};function t(){for(var e=i[r=0],t=1;t<a;){var n=t+1,r=t;n<a&&i[n].score<i[t].score&&(r=n),i[r-1>>1]=i[r],t=1+(r<<1)}for(var o=r-1>>1;0<r&&e.score<i[o].score;o=(r=o)-1>>1)i[r]=i[o];i[r]=e}return e.add=function(e){var t=a;i[a++]=e;for(var n=t-1>>1;0<t&&e.score<i[n].score;n=(t=n)-1>>1)i[t]=i[n];i[t]=e},e.poll=function(){if(0!==a){var e=i[0];return i[0]=i[--a],t(),e}},e.peek=function(e){if(0!==a)return i[0]},e.replaceTop=function(e){i[0]=e,t()},e}var S=o();return function e(C){var k={single:function(e,t,n){return e?(N(e)||(e=k.getPreparedSearch(e)),t?(N(t)||(t=k.getPrepared(t)),((n&&void 0!==n.allowTypo?n.allowTypo:!C||void 0===C.allowTypo||C.allowTypo)?k.algorithm:k.algorithmNoTypo)(e,t,e[0])):null):null},go:function(e,t,n){if(!e)return L;var r,o,i=(e=k.prepareSearch(e))[0],a=n&&n.threshold||C&&C.threshold||-9007199254740991,c=n&&n.limit||C&&C.limit||9007199254740991,s=(n&&void 0!==n.allowTypo?n.allowTypo:!C||void 0===C.allowTypo||C.allowTypo)?k.algorithm:k.algorithmNoTypo,u=0,f=0,l=t.length;if(n&&n.keys)for(var p=n.scoreFn||_,d=n.keys,h=d.length,g=l-1;0<=g;--g){for(var y=t[g],v=new Array(h),m=h-1;0<=m;--m)(r=R(y,w=d[m]))?(N(r)||(r=k.getPrepared(r)),v[m]=s(e,r,i)):v[m]=null;v.obj=y;var b=p(v);null!==b&&(b<a||(v.score=b,u<c?(S.add(v),++u):(++f,b>S.peek().score&&S.replaceTop(v))))}else if(n&&n.key)for(var w=n.key,g=l-1;0<=g;--g)(r=R(y=t[g],w))&&(null!==(o=s(e,r=!N(r)?k.getPrepared(r):r,i))&&(o.score<a||(o={target:o.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:o.score,indexes:o.indexes,obj:y},u<c?(S.add(o),++u):(++f,o.score>S.peek().score&&S.replaceTop(o)))));else for(g=l-1;0<=g;--g)(r=t[g])&&(null!==(o=s(e,r=!N(r)?k.getPrepared(r):r,i))&&(o.score<a||(u<c?(S.add(o),++u):(++f,o.score>S.peek().score&&S.replaceTop(o)))));if(0===u)return L;var j=new Array(u);for(g=u-1;0<=g;--g)j[g]=S.poll();return j.total=u+f,j},goAsync:function(T,x,O){var A=!1,e=new Promise(function(d,h){if(!T)return d(L);var g=(T=k.prepareSearch(T))[0],y=o(),v=x.length-1,m=O&&O.threshold||C&&C.threshold||-9007199254740991,b=O&&O.limit||C&&C.limit||9007199254740991,w=(O&&void 0!==O.allowTypo?O.allowTypo:!C||void 0===C.allowTypo||C.allowTypo)?k.algorithm:k.algorithmNoTypo,j=0,S=0;function E(){if(A)return h("canceled");var e,t,n=Date.now();if(O&&O.keys)for(var r=O.scoreFn||_,o=O.keys,i=o.length;0<=v;--v){for(var a=x[v],c=new Array(i),s=i-1;0<=s;--s)(e=R(a,f=o[s]))?(N(e)||(e=k.getPrepared(e)),c[s]=w(T,e,g)):c[s]=null;c.obj=a;var u=r(c);if(null!==u&&!(u<m)&&(c.score=u,j<b?(y.add(c),++j):(++S,u>y.peek().score&&y.replaceTop(c)),v%1e3==0&&10<=Date.now()-n))return void(P?setImmediate:setTimeout)(E)}else if(O&&O.key){for(var f=O.key;0<=v;--v)if((e=R(a=x[v],f))&&(N(e)||(e=k.getPrepared(e)),null!==(t=w(T,e,g))&&!(t.score<m)&&(t={target:t.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:t.score,indexes:t.indexes,obj:a},j<b?(y.add(t),++j):(++S,t.score>y.peek().score&&y.replaceTop(t)),v%1e3==0&&10<=Date.now()-n)))return void(P?setImmediate:setTimeout)(E)}else for(;0<=v;--v)if((e=x[v])&&(N(e)||(e=k.getPrepared(e)),null!==(t=w(T,e,g))&&!(t.score<m)&&(j<b?(y.add(t),++j):(++S,t.score>y.peek().score&&y.replaceTop(t)),v%1e3==0&&10<=Date.now()-n)))return void(P?setImmediate:setTimeout)(E);if(0===j)return d(L);for(var l=new Array(j),p=j-1;0<=p;--p)l[p]=y.poll();l.total=j+S,d(l)}P?setImmediate(E):E()});return e.cancel=function(){A=!0},e},highlight:function(e,t,n){if(null===e)return null;void 0===t&&(t="<b>"),void 0===n&&(n="</b>");for(var r="",o=0,i=!1,a=e.target,c=a.length,s=e.indexes,u=0;u<c;++u){var f=a[u];if(s[o]===u){if(i||(i=!0,r+=t),++o===s.length){r+=f+n+a.substr(u+1);break}}else i&&(i=!1,r+=n);r+=f}return r},prepare:function(e){if(e)return{target:e,_targetLowerCodes:k.prepareLowerCodes(e),_nextBeginningIndexes:null,score:null,indexes:null,obj:null}},prepareSlow:function(e){if(e)return{target:e,_targetLowerCodes:k.prepareLowerCodes(e),_nextBeginningIndexes:k.prepareNextBeginningIndexes(e),score:null,indexes:null,obj:null}},prepareSearch:function(e){if(e)return k.prepareLowerCodes(e)},getPrepared:function(e){if(999<e.length)return k.prepare(e);var t=n.get(e);return void 0!==t||(t=k.prepare(e),n.set(e,t)),t},getPreparedSearch:function(e){if(999<e.length)return k.prepareSearch(e);var t=r.get(e);return void 0!==t||(t=k.prepareSearch(e),r.set(e,t)),t},algorithm:function(e,t,n){for(var r=t._targetLowerCodes,o=e.length,i=r.length,a=0,c=0,s=0,u=0;;){if(n===r[c]){if(w[u++]=c,++a===o)break;n=e[0===s?a:s===a?a+1:s===a-1?a-1:a]}if(++c>=i)for(;;){if(a<=1)return null;if(0===s){if(n===e[--a])continue;s=a}else{if(1===s)return null;if((n=e[1+(a=--s)])===e[a])continue}c=w[(u=a)-1]+1;break}}var a=0,f=0,l=!1,p=0,d=t._nextBeginningIndexes;null===d&&(d=t._nextBeginningIndexes=k.prepareNextBeginningIndexes(t.target));var h,g=c=0===w[0]?0:d[w[0]-1];if(c!==i)for(;;)if(i<=c){if(a<=0){if(++f>o-2)break;if(e[f]===e[f+1])continue;c=g;continue}--a,c=d[j[--p]]}else if(e[0===f?a:f===a?a+1:f===a-1?a-1:a]===r[c]){if(j[p++]=c,++a===o){l=!0;break}++c}else c=d[c];for(var y=l?(h=j,p):(h=w,u),v=0,m=-1,b=0;b<o;++b)m!==(c=h[b])-1&&(v-=c),m=c;for(l?0!==f&&(v+=-20):(v*=1e3,0!==s&&(v+=-20)),t.score=v-=i-o,t.indexes=new Array(y),b=y-1;0<=b;--b)t.indexes[b]=h[b];return t},algorithmNoTypo:function(e,t,n){for(var r=t._targetLowerCodes,o=e.length,i=r.length,a=0,c=0,s=0;;){if(n===r[c]){if(w[s++]=c,++a===o)break;n=e[a]}if(++c>=i)return null}var u,a=0,f=!1,l=0,p=t._nextBeginningIndexes;if(null===p&&(p=t._nextBeginningIndexes=k.prepareNextBeginningIndexes(t.target)),(c=0===w[0]?0:p[w[0]-1])!==i)for(;;)if(i<=c){if(a<=0)break;--a,c=p[j[--l]]}else if(e[a]===r[c]){if(j[l++]=c,++a===o){f=!0;break}++c}else c=p[c];for(var d=f?(u=j,l):(u=w,s),h=0,g=-1,y=0;y<o;++y)g!==(c=u[y])-1&&(h-=c),g=c;for(f||(h*=1e3),t.score=h-=i-o,t.indexes=new Array(d),y=d-1;0<=y;--y)t.indexes[y]=u[y];return t},prepareLowerCodes:function(e){for(var t=e.length,n=[],r=e.toLowerCase(),o=0;o<t;++o)n[o]=r.charCodeAt(o);return n},prepareBeginningIndexes:function(e){for(var t=e.length,n=[],r=0,o=!1,i=!1,a=0;a<t;++a){var c=e.charCodeAt(a),s=65<=c&&c<=90,u=s||97<=c&&c<=122||48<=c&&c<=57,c=s&&!o||!i||!u,o=s,i=u;c&&(n[r++]=a)}return n},prepareNextBeginningIndexes:function(e){for(var t=e.length,n=k.prepareBeginningIndexes(e),r=[],o=n[0],i=0,a=0;a<t;++a)a<o?r[a]=o:(o=n[++i],r[a]=void 0===o?t:o);return r},cleanup:t,new:e};return k}()});var GhostSearch=function(){function t(e){_classCallCheck(this,t),this.check=!1;e=this.mergeDeep({host:"",key:"",version:"v2",input:"#ghost-search-field",results:"#ghost-search-results",button:"",defaultValue:"",template:function(e){return'<a href="'+[location.protocol,"//",location.host].join("")+"/"+e.slug+'/">'+e.title+"</a>"},trigger:"focus",options:{keys:["title"],limit:10,threshold:-3500,allowTypo:!1},api:{resource:"posts",parameters:{limit:"all",fields:["title","slug"],filter:"",include:"",order:"",formats:"",page:""}},on:{beforeDisplay:function(){},afterDisplay:function(e){},beforeFetch:function(){},afterFetch:function(e){}}},e);Object.assign(this,e),this.init()}return _createClass(t,[{key:"mergeDeep",value:function(t,n){var r=this;return t&&"object"===_typeof(t)&&!Array.isArray(t)&&null!==t&&n&&"object"===_typeof(n)&&!Array.isArray(n)&&null!==n&&Object.keys(n).forEach(function(e){n[e]&&"object"===_typeof(n[e])&&!Array.isArray(n[e])&&null!==n[e]?(t[e]||Object.assign(t,_defineProperty({},e,{})),r.mergeDeep(t[e],n[e])):Object.assign(t,_defineProperty({},e,n[e]))}),t}},{key:"fetch",value:function(){var t=this;this.on.beforeFetch();var e,n=new GhostContentAPI({host:this.host,key:this.key,version:this.version}),r={},o=this.api.parameters;for(e in o)""!=o[e]&&(r[e]=o[e]);r.limit="all",n[this.api.resource].browse(r).then(function(e){t.search(e)}).catch(function(e){console.error(e)})}},{key:"createElementFromHTML",value:function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}},{key:"displayResults",value:function(e){if(null!==document.querySelectorAll(this.results)[0].firstChild&&""!==document.querySelectorAll(this.results)[0].firstChild)for(;document.querySelectorAll(this.results)[0].firstChild;)document.querySelectorAll(this.results)[0].removeChild(document.querySelectorAll(this.results)[0].firstChild);var t=document.querySelectorAll(this.input)[0].value;""!=this.defaultValue&&(t=this.defaultValue);var n,r=fuzzysort.go(t,e,{keys:this.options.keys,limit:this.options.limit,allowTypo:this.options.allowTypo,threshold:this.options.threshold});for(n in r)n<r.length&&document.querySelectorAll(this.results)[0].appendChild(this.createElementFromHTML(this.template(r[n].obj)));this.on.afterDisplay(r),this.defaultValue=""}},{key:"search",value:function(t){var e,n=this;this.on.afterFetch(t),this.check=!0,""!=this.defaultValue&&(this.on.beforeDisplay(),this.displayResults(t)),""!=this.button?("INPUT"==(e=document.querySelectorAll(this.button)[0]).tagName&&"submit"==e.type&&e.closest("form").addEventListener("submit",function(e){e.preventDefault()}),e.addEventListener("click",function(e){e.preventDefault(),n.on.beforeDisplay(),n.displayResults(t)})):document.querySelectorAll(this.input)[0].addEventListener("keyup",function(e){n.on.beforeDisplay(),n.displayResults(t)})}},{key:"checkArgs",value:function(){return document.querySelectorAll(this.input).length?document.querySelectorAll(this.results).length?""==this.button||document.querySelectorAll(this.button).length?""==this.host?(console.log("Content API Client Library host missing. Please set the host. Must not end in a trailing slash."),!1):""!=this.key||(console.log('Content API Client Library key missing. Please set the key. Hex string copied from the "Integrations" screen in Ghost Admin.'),!1):(console.log("Button not found."),!1):(console.log("Results not found."),!1):(console.log("Input not found."),!1)}},{key:"validate",value:function(){return!!this.checkArgs()}},{key:"init",value:function(){var t=this;this.validate()&&(""!=this.defaultValue&&(document.querySelectorAll(this.input)[0].value=this.defaultValue,window.onload=function(){t.check||t.fetch()}),"focus"==this.trigger?document.querySelectorAll(this.input)[0].addEventListener("focus",function(e){t.check||t.fetch()}):"load"==this.trigger&&(window.onload=function(){t.check||t.fetch()}))}}]),t}();
//# sourceMappingURL=search.js.map